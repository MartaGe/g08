<!DOCTYPE html>
<html lang=de>
    <head>
        <title>Zu Fuß in Wien interaktive Karte</title>
        <!-- <link rel="stylesheet" href="style/map.css"> -->
        <link rel="stylesheet" href="thirdparty/leaflet/leaflet.css">
        <script src="thirdparty/leaflet/leaflet.js"></script>
        <script src="thirparty/leaflet/leaflet-src.js.map"></script>
        <script src="thirdparty/jquery-3.6.0.min.js"></script>
        <!-- <script src="scripts/map.js"></script> -->
    </head>

    <body>
        <h1>Interaktive Karte</h1>
        <p>Drücke auf die <b>Markierungen</b> auf der Karte um mehr Informationen zu
            Problemlagen auf Gehsteigen und Gehwegen zu bekommen</p>
        <br>
        <!-- <div id="kartencontent" class="content"> -->
        <div id='Karte' style="height:600px; width:900px;"> </div>
         <!-- </div> Die Idee hinter dieser div Klasse wäre die Grundlage für ein CSS zu schaffen-->


    <script>       
       // map erstellen 
       var map= L.map('Karte').setView([48.19722537806256, 16.37015461921692], 12);

       
        // basemaps

        var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{
            attribution:'©<ahref="http://osm.org/copyright">OpenStreetMap</a>contributors' }
        ).addTo(map);

        var osm_bw = L.tileLayer('http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', {
                        attribution: '©<ahref="http://osm.org/copyright">OpenStreetMap</a> contributors' }
        ).addTo(map); 
      
        var baseMaps = {
            "Open Street Map":osm,
            "Open Street Map B&W":osm_bw
        };

        // marker

        var ownicon = L.icon({
            iconUrl: 'img/icon.png',
            iconSize: [100,100],
            iconAnchor:[22, 94],
            popupAnchor:  [-3, -76]
        });
               
        var marker1 = L.marker([48.21798199057435,16.37907028198242], {icon: ownicon}).bindPopup('<b>Art des Problems</b><br>Gehweg zugeparkt');
        var marker2 = L.marker([48.17791446461507,16.33581429719925]).bindPopup('<b>Art des Problems</b><br>Gehsteig zu schmal');
        var marker3 = L.marker([48.17813445579481,16.38831853866577]).bindPopup('<b>Art des Problems</b><br>Katastrophe');
        var marker4 = L.marker([48.21008,16.35203]).bindPopup('<b>Art des Problems</b><br>Gehseteig zu schmal');

        
        var places = L.layerGroup([marker1,marker2,marker3]);

       
        // stand alone Pop-up (z.B. für Anleitung)
        var popup = L.popup()
            .setLatLng([48.2,16.33])
            .setContent("Klicke auf die Marker um die <br> Art des Problems zu erfahren")
            .openOn(map);

       
        // GeoJSON Layer einfügen 
        var myGeoJsonLayer = L.geoJSON().addTo(map);

        $.getJSON('data/map1.geojson',function(result){
            myGeoJsonLayer.addData(result);
            myGeoJsonLayer.setStyle((feature)=>geoJsonStyle(feature))
            });
      
        function geoJsonStyle (feature) {
            console.log(feature);
            var style = {
                "weight": 2,
                "color": "#FF0000"
            };
            return style
        }

        // var JsonStyle = L.geoJSON('data/linie.json', {style: function(feature) {
        //     switch (feature.properties.xxxx) {
        //         case '': return {color: ""}
        //         case '': return {color: ""}
        //         }
        //         }
        //  }).addTo(map)

        // Layer Control

        var layermap = {
            "GeoJSON" : myGeoJsonLayer,
            "Problemstellen": places
            };

        L.control.layers(baseMaps,layermap).addTo(map);


    </script>

    </body>

</html>
